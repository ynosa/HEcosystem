/*
 Copyright (c) Microsoft Corporation.  All rights reserved.
 This code is licensed by Microsoft Corporation under the terms
 of the MICROSOFT REACTIVE EXTENSIONS FOR JAVASCRIPT AND .NET LIBRARIES License.
 See http://go.microsoft.com/fwlink/?LinkID=220762.
*/
module.exports=function(t,n){var e;e=t.Rx;var r=e.Observable,o=r.prototype,i=r.createWithDisposable,u=r.defer,s=r.throwException,c=e.Scheduler.Timeout,f=e.SingleAssignmentDisposable,a=e.SerialDisposable,h=e.CompositeDisposable,l=e.RefCountDisposable,p=e.Subject,d=e.Internals.BinaryObserver,v=function(t,n){return i(function(e){return new h(n.getDisposable(),t.subscribe(e))})},b=function(t,n,e){return i(function(r){var o=new f,i=new f,r=e(r,o,i);return o.disposable(t.materialize().select(function(t){return{switchValue:function(n){return n(t)}}}).subscribe(r)),i.disposable(n.materialize().select(function(t){return{switchValue:function(n,e){return e(t)}}}).subscribe(r)),new h(o,i)})},m=function(t,n){return i(function(e){return n.scheduleWithAbsolute(t,function(){e.onNext(0),e.onCompleted()})})},y=function(t,n,e){var r=0>n?0:n;return i(function(n){var o=0,i=t;return e.scheduleRecursiveWithAbsolute(i,function(t){var u;r>0&&(u=e.now(),i+=r,u>=i&&(i=u+r)),n.onNext(o++),t(i)})})},g=function(t,n){var e=0>t?0:t;return i(function(t){return n.scheduleWithRelative(e,function(){t.onNext(0),t.onCompleted()})})},w=function(t,n,e){return u(function(){return y(e.now()+t,n,e)})},E=r.interval=function(t,n){return n||(n=c),w(t,t,n)};r.timer=function(t,e,r){var o;return r||(r=c),e!==n&&"number"==typeof e?o=e:e!==n&&"object"==typeof e&&(r=e),t instanceof Date&&o===n?m(t.getTime(),r):t instanceof Date&&o!==n?y(t.getTime(),e,r):o===n?g(t,r):w(t,o,r)};var x=function(t,n,e){return i(function(r){var o,i=!1,u=new a,s=null,c=[],l=!1;return o=t.materialize().timestamp(e).subscribe(function(t){"E"===t.value.kind?(c=[],c.push(t),s=t.value.exception,t=!l):(c.push({value:t.value,timestamp:t.timestamp+n}),t=!i,i=!0),t&&(null!==s?r.onError(s):(t=new f,u.disposable(t),t.disposable(e.scheduleRecursiveWithRelative(n,function(t){var n,o,u;if(null===s){l=!0;do n=null,0<c.length&&0>=c[0].timestamp-e.now()&&(n=c.shift().value),null!==n&&n.accept(r);while(null!==n);u=!1,o=0,0<c.length?(u=!0,o=Math.max(0,c[0].timestamp-e.now())):i=!1,n=s,l=!1,null!==n?r.onError(n):u&&t(o)}}))))}),new h(o,u)})},C=function(t,n,e){return u(function(){var t=n-e.now();return x(t,e)})};o.delay=function(t,n){return n||(n=c),t instanceof Date?C(this,t.getTime(),n):x(this,t,n)},o.throttle=function(t,n){n||(n=c);var e=this;return i(function(r){var o,i=new a,u=!1,s=0,c=null;return o=e.subscribe(function(e){var o;u=!0,c=e,s++,o=s,e=new f,i.disposable(e),e.disposable(n.scheduleWithRelative(t,function(){u&&s===o&&r.onNext(c),u=!1}))},function(t){i.dispose(),r.onError(t),u=!1,s++},function(){i.dispose(),u&&r.onNext(c),r.onCompleted(),u=!1,s++}),new h(o,i)})},o.windowWithTime=function(t,e,r){var o,u=this;return e===n&&(o=t),r===n&&(r=c),"number"==typeof e?o=e:"object"==typeof e&&(o=t,r=e),i(function(n){var e,i,s,c=o,d=t,b=[],m=new a,y=0;return i=new h(m),s=new l(i),e=function(){var t,i,u,a,h;u=new f,m.disposable(u),t=i=!1,d===c?t=i=!0:c>d?i=!0:t=!0,a=i?d:c,h=a-y,y=a,i&&(d+=o),t&&(c+=o),u.disposable(r.scheduleWithRelative(h,function(){var r;t&&(r=new p,b.push(r),n.onNext(v(r,s))),i&&(r=b.shift(),r.onCompleted()),e()}))},b.push(new p),n.onNext(v(b[0],s)),e(),i.add(u.subscribe(function(t){var n,e;for(n=0;n<b.length;n++)e=b[n],e.onNext(t)},function(t){var e,r;for(e=0;e<b.length;e++)r=b[e],r.onError(t);n.onError(t)},function(){var t,e;for(t=0;t<b.length;t++)e=b[t],e.onCompleted();n.onCompleted()})),s})},o.windowWithTimeOrCount=function(t,n,e){var r=this;return e||(e=c),i(function(o){var i,u,s,c,d=0,b=new a,m=0;return u=new h(b),s=new l(u),i=function(n){var r=new f;b.disposable(r),r.disposable(e.scheduleWithRelative(t,function(){var t;n===m&&(d=0,t=++m,c.onCompleted(),c=new p,o.onNext(v(c,s)),i(t))}))},c=new p,o.onNext(v(c,s)),i(0),u.add(r.subscribe(function(t){var e=0,r=!1;c.onNext(t),d++,d===n&&(r=!0,d=0,e=++m,c.onCompleted(),c=new p,o.onNext(v(c,s))),r&&i(e)},function(t){c.onError(t),o.onError(t)},function(){c.onCompleted(),o.onCompleted()})),s})},o.bufferWithTime=function(t,e,r){var o;return e===n&&(o=t),r||(r=c),"number"==typeof e?o=e:"object"==typeof e&&(o=t,r=e),this.windowWithTime(t,o,r).selectMany(function(t){return t.toArray()})},o.bufferWithTimeOrCount=function(t,n,e){return e||(e=c),this.windowWithTimeOrCount(t,n,e).selectMany(function(t){return t.toArray()})},o.timeInterval=function(t){var n=this;return t||(t=c),u(function(){var e=t.now();return n.select(function(n){var r=t.now(),o=r-e;return e=r,{value:n,interval:o}})})},o.timestamp=function(t){return t||(t=c),this.select(function(n){return{value:n,timestamp:t.now()}})};var N=function(t,e){return b(t,e,function(t){var e,r=!1;return new d(function(n){"N"===n.kind&&(e=n),"E"===n.kind&&n.accept(t),"C"===n.kind&&(r=!0)},function(){var o=e;e=n,o!==n&&o.accept(t),r&&t.onCompleted()})})};o.sample=function(t,n){return n||(n=c),"number"==typeof t?N(this,E(t,n)):N(this,t)},o.timeout=function(t,e,r){var o,u=this;return e===n&&(e=s(Error("Timeout"))),r||(r=c),o=t instanceof Date?function(t,n){r.scheduleWithAbsolute(t,n)}:function(t,n){r.scheduleWithRelative(t,n)},i(function(n){var r,i=0,s=new f,c=new a,l=!1,p=new a;return c.disposable(s),r=function(){var r=i;p.disposable(o(t,function(){(l=i===r)&&c.disposable(e.subscribe(n))}))},r(),s.disposable(u.subscribe(function(t){l||(i++,n.onNext(t),r())},function(t){l||(i++,n.onError(t))},function(){l||(i++,n.onCompleted())})),new h(c,p)})},r.generateWithAbsoluteTime=function(t,n,e,r,o,u){return u||(u=c),i(function(i){var s,c,f=!0,a=!1,h=t;return u.scheduleRecursiveWithAbsolute(u.now(),function(t){a&&i.onNext(s);try{f?f=!1:h=e(h),(a=n(h))&&(s=r(h),c=o(h))}catch(u){return void i.onError(u)}a?t(c):i.onCompleted()})})},r.generateWithRelativeTime=function(t,n,e,r,o,u){return u||(u=c),i(function(i){var s,c,f=!0,a=!1,h=t;return u.scheduleRecursiveWithRelative(0,function(t){a&&i.onNext(s);try{f?f=!1:h=e(h),(a=n(h))&&(s=r(h),c=o(h))}catch(u){return void i.onError(u)}a?t(c):i.onCompleted()})})}};
//# sourceMappingURL=jspm_packages\npm\rxjs@1.0.10621/lib\rx.time.min.js.map