/*
 Copyright (c) Microsoft Corporation.  All rights reserved.
 This code is licensed by Microsoft Corporation under the terms
 of the MICROSOFT REACTIVE EXTENSIONS FOR JAVASCRIPT AND .NET LIBRARIES License.
 See http://go.microsoft.com/fwlink/?LinkID=220762.
*/
module.exports=function(t,e){var n,r=function(){},o=function(){return(new Date).getTime()},i=function(t,e){return t===e},s=function(t){return t},u=function(t){return t.toString()},c=Object.prototype.hasOwnProperty,f=function(t,e){function n(){this.constructor=t}for(var r in e)c.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.base=e.prototype,t},h=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n])},a=Array.prototype.slice,l="Object has been disposed";n=t.Rx={Internals:{}},n.VERSION="1.0.10621";var p,d=function(t,e){return ce(function(n){return new g(e.getDisposable(),t.subscribe(n))})},v=function(t,e,n){return ce(function(r){var o=new C,i=new C,r=n(r,o,i);return o.disposable(t.materialize().select(function(t){return{switchValue:function(e){return e(t)}}}).subscribe(r)),i.disposable(e.materialize().select(function(t){return{switchValue:function(e,n){return n(t)}}}).subscribe(r)),new g(o,i)})},b=n.Internals.List=function(){function t(t){this.comparer=t||i,this.size=0,this.items=[]}return t.fromArray=function(e,n){var r,o=e.length,i=new t(n);for(r=0;o>r;r++)i.add(e[r]);return i},t.prototype.count=function(){return this.size},t.prototype.add=function(t){this.items[this.size]=t,this.size++},t.prototype.removeAt=function(t){if(0>t||t>=this.size)throw Error("Argument out of range");0===t?this.items.shift():this.items.splice(t,1),this.size--},t.prototype.indexOf=function(t){var e,n;for(e=0;e<this.items.length;e++)if(n=this.items[e],this.comparer(t,n))return e;return-1},t.prototype.remove=function(t){return t=this.indexOf(t),-1===t?!1:(this.removeAt(t),!0)},t.prototype.clear=function(){this.items=[],this.size=0},t.prototype.item=function(t,n){if(0>t||t>=count)throw Error("Argument out of range");return n===e?this.items[t]:void(this.items[t]=n)},t.prototype.toArray=function(){var t,e=[];for(t=0;t<this.items.length;t++)e.push(this.items[t]);return e},t.prototype.contains=function(t){for(var e=0;e<this.items.length;e++)if(this.comparer(t,this.items[e]))return!0;return!1},t}(),y=function(){function t(t,e){this.id=t,this.value=e}return t.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e},t}(),m=function(){function t(t){this.items=Array(t),this.size=0}return t.prototype.count=function(){return this.size},t.prototype.isHigherPriority=function(t,e){return 0>this.items[t].compareTo(this.items[e])},t.prototype.percolate=function(t){var e,n;t>=this.size||0>t||(e=Math.floor((t-1)/2),0>e||e===t||!this.isHigherPriority(t,e)||(n=this.items[t],this.items[t]=this.items[e],this.items[e]=n,this.percolate(e)))},t.prototype.heapify=function(t){var n,r,o;t===e&&(t=0),t>=this.size||0>t||(r=2*t+1,o=2*t+2,n=t,r<this.size&&this.isHigherPriority(r,n)&&(n=r),o<this.size&&this.isHigherPriority(o,n)&&(n=o),n!==t&&(r=this.items[t],this.items[t]=this.items[n],this.items[n]=r,this.heapify(n)))},t.prototype.peek=function(){return this.items[0].value},t.prototype.removeAt=function(t){if(this.items[t]=this.items[--this.size],delete this.items[this.size],this.heapify(),this.size<this.items.length>>2)for(var t=this.items,e=this.items=Array(this.items.length>>1),n=this.size;n>0;)e[n+0-1]=t[n+0-1],n--},t.prototype.dequeue=function(){var t=this.peek();return this.removeAt(0),t},t.prototype.enqueue=function(e){var n;if(this.size>=this.items.length){n=this.items;for(var r=this.items=Array(2*this.items.length),o=n.length;o>0;)r[o+0-1]=n[o+0-1],o--}n=this.size++,this.items[n]=new y(t.count++,e),this.percolate(n)},t.prototype.remove=function(t){var e;for(e=0;e<this.size;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},t.count=0,t}(),g=n.CompositeDisposable=function(){function t(){var t=!1,n=b.fromArray(a.call(arguments));this.count=function(){return n.count()},this.add=function(e){t?e.dispose():n.add(e)},this.remove=function(e){var r=!1;return t||(r=n.remove(e)),r&&e.dispose(),r},this.dispose=function(){var r,o;if(t||(t=!0,r=n.toArray(),n.clear()),r!==e)for(o=0;o<r.length;o++)r[o].dispose()},this.clear=function(){var t,e;for(t=n.toArray(),n.clear(),e=0;e<t.length;e++)t[e].dispose()},this.contains=function(t){return n.contains(t)},this.isDisposed=function(){return t},this.toArray=function(){return n.toArray()}}return t.prototype.count=function(){return this.count()},t.prototype.add=function(t){this.add(t)},t.prototype.remove=function(t){this.remove(t)},t.prototype.dispose=function(){this.dispose()},t.prototype.clear=function(){this.clear()},t.prototype.contains=function(t){return this.contains(t)},t.prototype.isDisposed=function(){return this.isDisposed()},t.prototype.toArray=function(){return this.toArray()},t}(),E=n.Disposable=function(){function t(t){var e=!1;this.dispose=function(){e||(t(),e=!0)}}return t.prototype.dispose=function(){this.dispose()},t}(),w=E.create=function(t){return new E(t)},x=E.empty=new E(function(){}),C=n.SingleAssignmentDisposable=function(){function t(){var t=!1,e=null;this.isDisposed=function(){return t},this.getDisposable=function(){return e},this.setDisposable=function(n){if(null!==e)throw Error("Disposable has already been assigned");var r=t;r||(e=n),r&&null!==n&&n.dispose()},this.dispose=function(){var n=null;t||(t=!0,n=e,e=null),null!==n&&n.dispose()}}return t.prototype.isDisposed=function(){return this.isDisposed()},t.prototype.disposable=function(t){return t===e?this.getDisposable():void this.setDisposable(t)},t.prototype.dispose=function(){this.dispose()},t}(),A=n.SerialDisposable=function(){function t(){var t=!1,e=null;this.isDisposed=function(){return t},this.getDisposable=function(){return e},this.setDisposable=function(n){var r=t,o=null;r||(o=e,e=n),null!==o&&o.dispose(),r&&null!==n&&n.dispose()},this.dispose=function(){var n=null;t||(t=!0,n=e,e=null),null!==n&&n.dispose()}}return t.prototype.isDisposed=function(){return this.isDisposed()},t.prototype.disposable=function(t){return t===e?this.getDisposable():void this.setDisposable(t)},t.prototype.dispose=function(){this.dispose()},t.prototype.dispose=function(){this.dispose()},t}(),k=n.RefCountDisposable=function(){function t(t){var e=!1,n=!1,r=0;this.dispose=function(){var o=!1;!e&&!n&&(n=!0,0===r&&(o=e=!0)),o&&t.dispose()},this.getDisposable=function(){if(e)return x;r++;var o=!1;return{dispose:function(){var i=!1;!e&&!o&&(o=!0,r--,0===r&&n&&(i=e=!0)),i&&t.dispose()}}},this.isDisposed=function(){return e}}return t.prototype.dispose=function(){this.dispose()},t.prototype.getDisposable=function(){return this.getDisposable()},t.prototype.isDisposed=function(){return this.isDisposed()},t}();p=function(){function t(t,e,n,r,o){this.scheduler=t,this.state=e,this.action=n,this.dueTime=r,this.comparer=o||function(t,e){return t-e},this.disposable=new C}return t.prototype.invoke=function(){return this.disposable.disposable(this.invokeCore())},t.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},t.prototype.isCancelled=function(){return this.disposable.isDisposed()},t.prototype.invokeCore=function(){return this.action(this.scheduler,this.state)},t}();var N=n.Scheduler=function(){function t(t,e,n,r){this.now=t,this._schedule=e,this._scheduleRelative=n,this._scheduleAbsolute=r}var e=function(t,e){var n,r,o,i;return r=new g,i=e.first,n=e.second,o=null,o=function(e){n(e,function(e){var n,i,s;s=i=!1,n=null,n=t.scheduleWithState(e,function(t,e){return i?r.remove(n):s=!0,o(e),x}),s||(r.add(n),i=!0)})},o(i),r},n=function(t,e){var n,r,o,i;return r=new g,i=e.first,n=e.second,o=function(e){n(e,function(e,n){var i,s,u;u=s=!1,i=t.scheduleWithRelativeAndState(e,n,function(t,e){return s?r.remove(i):u=!0,o(e),x}),u||(r.add(i),s=!0)})},o(i),r},r=function(t,e){var n,r,o,i;return r=new g,i=e.first,n=e.second,o=function(e){n(e,function(e,n){var i=!1,s=!1,u=t.scheduleWithAbsoluteAndState(e,n,function(t,e){return i?r.remove(u):s=!0,o(e),x});s||(r.add(u),i=!0)})},o(i),r},i=function(t,e){return e(),x};return t.prototype.schedule=function(t){return this._schedule(t,i)},t.prototype.scheduleWithState=function(t,e){return this._schedule(t,e)},t.prototype.scheduleWithRelative=function(t,e){return this._scheduleRelative(e,t,i)},t.prototype.scheduleWithRelativeAndState=function(t,e,n){return this._scheduleRelative(t,e,n)},t.prototype.scheduleWithAbsolute=function(t,e){return this._scheduleAbsolute(e,t,i)},t.prototype.scheduleWithAbsoluteAndState=function(t,e,n){return this._scheduleAbsolute(t,e,n)},t.prototype.scheduleRecursive=function(t){return this.scheduleRecursiveWithState(t,function(t,e){t(function(){e(t)})})},t.prototype.scheduleRecursiveWithState=function(t,n){return this.scheduleWithState({first:t,second:n},function(t,n){return e(t,n)})},t.prototype.scheduleRecursiveWithRelative=function(t,e){return this.scheduleRecursiveWithRelativeAndState(e,t,function(t,e){t(function(n){e(t,n)})})},t.prototype.scheduleRecursiveWithRelativeAndState=function(t,e,r){return this._scheduleRelative({first:t,second:r},e,function(t,e){return n(t,e)})},t.prototype.scheduleRecursiveWithAbsolute=function(t,e){return this.scheduleRecursiveWithAbsoluteAndState(e,t,function(t,e){t(function(n){e(t,n)})})},t.prototype.scheduleRecursiveWithAbsoluteAndState=function(t,e,n){return this._scheduleAbsolute({first:t,second:n},e,function(t,e){return r(t,e)})},t.now=o,t.normalize=function(t){return 0>t&&(t=0),t},t}(),_=function(){function t(){var e=this;t.base.constructor.call(this,o,function(t,n){return n(e,t)},function(t,n,r){for(;0<N.normalize(n););return r(e,t)},function(t,n,r){return e.scheduleWithRelativeAndState(t,n-e.now(),r)})}return f(t,N),t}(),O=N.Immediate=new _,z=function(){function t(){S.queue=new m(4)}return t.prototype.dispose=function(){S.queue=null},t.prototype.run=function(){for(var t,e=S.queue;0<e.count();)if(t=e.dequeue(),!t.isCancelled()){for(;0<t.dueTime-N.now(););t.isCancelled()||t.invoke()}},t}(),S=function(){function t(){var e=this;t.base.constructor.call(this,o,function(t,n){return e.scheduleWithRelativeAndState(t,0,n)},function(n,r,o){var i=e.now()+N.normalize(r),r=t.queue,n=new p(e,n,o,i);if(null===r){o=new z;try{t.queue.enqueue(n),o.run()}finally{o.dispose()}}else r.enqueue(n);return n.disposable},function(t,n,r){return e.scheduleWithRelativeAndState(t,n-e.now(),r)})}return f(t,N),t.prototype.scheduleRequired=function(){return null===t.queue},t.prototype.ensureTrampoline=function(t){return this.scheduleRequired()?this.schedule(t):t()},t.queue=null,t}(),D=N.CurrentThread=new S;n.VirtualTimeScheduler=function(){function t(e,n){var r=this;this.clock=e,this.comparer=n,this.isEnabled=!1,t.base.constructor.call(this,function(){return r.toDateTimeOffset(r.clock)},function(t,e){return r.scheduleAbsolute(t,r.clock,e)},function(t,e,n){return r.scheduleRelative(t,r.toRelative(e),n)},function(t,e,n){return r.scheduleRelative(t,r.toRelative(e-r.now()),n)}),this.queue=new m(1024)}return f(t,N),t.prototype.scheduleRelative=function(t,e,n){return e=this.add(this.clock,e),this.scheduleAbsolute(t,e,n)},t.prototype.start=function(){var t;if(!this.isEnabled){this.isEnabled=!0;do t=this.getNext(),null!==t?(0<this.comparer(t.dueTime,this.clock)&&(this.clock=t.dueTime),t.invoke()):this.isEnabled=!1;while(this.isEnabled)}},t.prototype.stop=function(){return this.isEnabled=!1},t.prototype.advanceTo=function(t){var e;if(0<=this.comparer(this.clock,t))throw Error("Argument out of range");if(!this.isEnabled){this.isEnabled=!0;do e=this.getNext(),null!==e&&0>=this.comparer(e.dueTime,t)?(0<this.comparer(e.dueTime,this.clock)&&(this.clock=e.dueTime),e.invoke()):this.isEnabled=!1;while(this.isEnabled);return this.clock=t}},t.prototype.advanceBy=function(t){if(t=this.add(this.clock,t),0<=this.comparer(this.clock,t))throw Error("Argument out of range");return this.advanceTo(t)},t.prototype.getNext=function(){for(var t;0<this.queue.count();){if(t=this.queue.peek(),!t.isCancelled())return t;this.queue.dequeue()}return null},t.prototype.scheduleAbsolute=function(t,e,n){var r=this,o=new p(r,t,function(t,e){return r.queue.remove(o),n(t,e)},e,r.comparer);return r.queue.enqueue(o),o.disposable},t}();var _=function(){function e(){var n=this;e.base.constructor.call(this,o,function(e,r){var o=t.setTimeout(function(){r(n,e)},0);return w(function(){t.clearTimeout(o)})},function(e,r,o){var i,r=N.normalize(r);return i=t.setTimeout(function(){o(n,e)},r),w(function(){t.clearTimeout(i)})},function(t,e,r){return n.scheduleWithRelativeAndState(t,e-n.now(),r)})}return f(e,N),e}(),q=N.Timeout=new _,R=n.Notification=function(){function t(){}return t.prototype.accept=function(t,e,n){return 1<arguments.length||"function"==typeof t?this._accept(t,e,n):this._acceptObservable(t)},t.prototype.toObservable=function(t){var e=this,t=t||N.Immediate;return ce(function(n){return t.schedule(function(){e._acceptObservable(n),"N"===e.kind&&n.onCompleted()})})},t.prototype.hasValue=!1,t.prototype.equals=function(t){return this.toString()===(t===e||null===t?"":t.toString())},t}();R.createOnNext=function(t){var e=new R;return e.value=t,e.hasValue=!0,e.kind="N",e._accept=function(t){return t(this.value)},e._acceptObservable=function(t){return t.onNext(this.value)},e.toString=function(){return"OnNext("+this.value+")"},e},R.createOnError=function(t){var e=new R;return e.exception=t,e.kind="E",e._accept=function(t,e){return e(this.exception)},e._acceptObservable=function(t){return t.onError(this.exception)},e.toString=function(){return"OnError("+this.exception+")"},e},R.createOnCompleted=function(){var t=new R;return t.kind="C",t._accept=function(t,e,n){return n()},t._acceptObservable=function(t){return t.onCompleted()},t.toString=function(){return"OnCompleted()"},t};var V=function(){},_=V.prototype;_.concat=function(){var t=this;return ce(function(e){var n,r=t.getEnumerator(),o=!1,i=new A;return n=O.scheduleRecursive(function(t){var n,s,u=!1;if(!o){try{(u=r.moveNext())&&(n=r.current)}catch(c){s=c}void 0!==s?e.onError(s):u?(s=new C,i.disposable(s),s.disposable(n.subscribe(function(t){e.onNext(t)},function(t){e.onError(t)},function(){t()}))):e.onCompleted()}}),new g(i,n,w(function(){o=!0}))})},_.catchException=function(){var t=this;return ce(function(e){var n,r,o,i=t.getEnumerator(),s=!1;return r=new A,n=O.scheduleRecursive(function(t){var n,u,c;if(c=!1,!s){try{(c=i.moveNext())&&(n=i.current)}catch(f){u=f}void 0!==u?e.onError(u):c?(u=new C,r.disposable(u),u.disposable(n.subscribe(function(t){e.onNext(t)},function(e){o=e,t()},function(){e.onCompleted()}))):void 0!==o?e.onError(o):e.onCompleted()}}),new g(r,n,w(function(){s=!0}))})};var W=V.repeat=function(t,n){n===e&&(n=-1);var r=new V;return r.getEnumerator=function(){return{left:n,current:null,moveNext:function(){return 0===this.left?(this.current=null,!1):(0<this.left&&this.left--,this.current=t,!0)}}},r},T=V.forEnumerator=function(t){var e=new V;return e.getEnumerator=function(){return{_index:-1,current:null,moveNext:function(){return++this._index<t.length?(this.current=t[this._index],!0):(this._index=-1,this.current=null,!1)}}},e},L=n.Observer=function(){},j=n.Internals.AbstractObserver=function(){function t(){this.isStopped=!1}return f(t,L),t.prototype.onNext=function(t){this.isStopped||this.next(t)},t.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},t.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},t.prototype.dispose=function(){this.isStopped=!0},t}(),P=function(){function t(e,n,r){t.base.constructor.call(this),this._onNext=e,this._onError=n,this._onCompleted=r}return f(t,j),t.prototype.next=function(t){this._onNext(t)},t.prototype.error=function(t){this._onError(t)},t.prototype.completed=function(){this._onCompleted()},t}(),H=n.Internals.BinaryObserver=function(){function t(t,e){"function"==typeof t&&"function"==typeof e?(this.leftObserver=Q(t),this.rightObserver=Q(e)):(this.leftObserver=t,this.rightObserver=e)}return f(t,L),t.prototype.onNext=function(t){var e=this;return t.switchValue(function(t){return t.accept(e.leftObserver)},function(t){return t.accept(e.rightObserver)})},t.prototype.onError=function(){},t.prototype.onCompleted=function(){},t}(),M=function(){function t(t,e){this.scheduler=t,this.observer=e,this.hasFaulted=this.isAcquired=!1,this.queue=[],this.disposable=new A}return f(t,j),t.prototype.ensureActive=function(){var t=!1,e=this;!this.hasFaulted&&0<this.queue.length&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.disposable(this.scheduler.scheduleRecursive(function(t){var n;if(0<e.queue.length){n=e.queue.shift();try{n()}catch(r){throw e.queue=[],e.hasFaulted=!0,r}t()}else e.isAcquired=!1}))},t.prototype.next=function(t){var e=this;this.queue.push(function(){e.observer.onNext(t)})},t.prototype.error=function(t){var e=this;this.queue.push(function(){e.observer.onError(t)})},t.prototype.completed=function(){var t=this;this.queue.push(function(){t.observer.onCompleted()})},t.prototype.dispose=function(){t.base.dispose.call(this),this.disposable.dispose()},t}(),I=L.create=function(t,e,n){return e||(e=function(t){throw t}),n||(n=function(){}),new P(t,e,n)};L.fromNotifier=function(t){return new P(function(e){return t(R.createOnNext(e))},function(e){return t(R.createOnError(e))},function(){return t(R.createOnCompleted())})};var Q=function(t){return new P(function(e){t(R.createOnNext(e))},function(e){t(R.createOnError(e))},function(){t(R.createOnCompleted())})};L.prototype.toNotifier=function(){var t=this;return function(e){return e.accept(t)}},L.prototype.asObserver=function(){var t=this;return new P(function(e){return t.onNext(e)},function(e){return t.onError(e)},function(){return t.onCompleted()})};var U=n.Observable=function(){function t(){}return t.prototype.subscribe=function(t,e,n){return this._subscribe(0===arguments.length||1<arguments.length||"function"==typeof t?I(t,e,n):t)},t}(),_=U.prototype,B=function(){function t(e){t.base.constructor.call(this),this._subscribe=function(t){var n=new G(t);return D.scheduleRequired()?D.schedule(function(){n.disposable(e(n))}):n.disposable(e(n)),n}}return f(t,U),t.prototype._subscribe=function(t){return this._subscribe(t)},t}(),G=function(){function t(e){t.base.constructor.call(this),this.observer=e,this.m=new C}return f(t,j),t.prototype.disposable=function(t){return this.m.disposable(t)},t.prototype.next=function(t){this.observer.onNext(t)},t.prototype.error=function(t){this.observer.onError(t),this.m.dispose()},t.prototype.completed=function(){this.observer.onCompleted(),this.m.dispose()},t.prototype.dispose=function(){t.base.dispose.call(this),this.m.dispose()},t}(),F=function(){function t(e,n,r){t.base.constructor.call(this),this.key=e,this.underlyingObservable=r?ce(function(t){return new g(r.getDisposable(),n.subscribe(t))}):n}return f(t,U),t.prototype._subscribe=function(t){return this.underlyingObservable.subscribe(t)},t}(),J=n.ConnectableObservable=function(){function t(t,e){var n=t.asObservable(),r=!1,o=null;this.connect=function(){return r||(r=!0,o=new g(n.subscribe(e),w(function(){r=!1}))),o},this._subscribe=function(t){return e.subscribe(t)}}return f(t,U),t.prototype.connect=function(){return this.connect()},t.prototype.refCount=function(){var t=null,e=0,n=this;return ce(function(r){var o,i;return e++,o=1===e,i=n.subscribe(r),o&&(t=n.connect()),w(function(){i.dispose(),e--,0===e&&t.dispose()})})},t.prototype._subscribe=function(t){return this._subscribe(t)},t}(),X=n.Subject=function(){function t(){t.base.constructor.call(this);var n=!1,r=!1,o=new b,i=e,s=function(){if(n)throw Error(l)};this.onCompleted=function(){var t,n;if(s(),r||(t=o.toArray(),o=new b,r=!0),t!==e)for(n=0;n<t.length;n++)t[n].onCompleted()},this.onError=function(t){var n,u;if(s(),r||(n=o.toArray(),o=new b,r=!0,i=t),n!==e)for(u=0;u<n.length;u++)n[u].onError(t)},this.onNext=function(t){var e,n;if(s(),r||(e=o.toArray()),void 0!==e)for(n=0;n<e.length;n++)e[n].onNext(t)},this._subscribe=function(t){return s(),r?i!==e?(t.onError(i),x):(t.onCompleted(),x):(o.add(t),function(t){return{observer:t,dispose:function(){null===this.observer||n||(o.remove(this.observer),this.observer=null)}}}(t))},this.dispose=function(){n=!0,o=null}}return f(t,U),h(t,L),t.prototype.onCompleted=function(){this.onCompleted()},t.prototype.onError=function(t){this.onError(t)},t.prototype.onNext=function(t){this.onNext(t)},t.prototype._subscribe=function(t){return this._subscribe(t)},t.prototype.dispose=function(){this.dispose()},t.create=function(t,e){return new $(t,e)},t}(),K=n.AsyncSubject=function(){function t(){t.base.constructor.call(this);var n=!1,r=!1,o=null,i=!1,s=new b,u=null,c=function(){if(n)throw Error(l)};this.onCompleted=function(){var t,n,u,f=!1;if(c(),r||(t=s.toArray(),s=new b,r=!0,n=o,f=i),t!==e)if(f)for(u=0;u<t.length;u++)f=t[u],f.onNext(n),f.onCompleted();else for(u=0;u<t.length;u++)t[u].onCompleted()},this.onError=function(t){var n,o;if(c(),r||(n=s.toArray(),s=new b,r=!0,u=t),n!==e)for(o=0;o<n.length;o++)n[o].onError(t)},this.onNext=function(t){c(),r||(o=t,i=!0)},this._subscribe=function(t){var e,f,h;return c(),r?(e=u,f=i,h=o,null!==e?t.onError(e):(f&&t.onNext(h),t.onCompleted()),x):(s.add(t),function(t){return{observer:t,dispose:function(){null===this.observer||n||(s.remove(this.observer),this.observer=null)}}}(t))},this.dispose=function(){n=!0,o=u=s=null}}return f(t,U),h(t,L),t.prototype.onCompleted=function(){this.onCompleted()},t.prototype.onError=function(t){this.onError(t)},t.prototype.onNext=function(t){this.onNext(t)},t.prototype._subscribe=function(t){return this._subscribe(t)},t.prototype.dispose=function(){this.dispose()},t}(),Y=n.BehaviorSubject=function(){function t(e){t.base.constructor.call(this);var n=e,r=new b,o=!1,i=!1,s=null,u=function(){if(o)throw Error(l)};this.onCompleted=function(){var t,e;if(t=null,u(),i||(t=r.toArray(),r=new b,i=!0),null!==t)for(e=0;e<t.length;e++)t[e].onCompleted()},this.onError=function(t){var e,n;if(n=null,u(),i||(n=r.toArray(),r=new b,i=!0,s=t),null!==n)for(e=0;e<n.length;e++)n[e].onError(t)},this.onNext=function(t){var e,o;if(e=null,u(),i||(n=t,e=r.toArray()),null!==e)for(o=0;o<e.length;o++)e[o].onNext(t)},this._subscribe=function(t){var e;return u(),i?(e=s,null!==e?t.onError(e):t.onCompleted(),x):(r.add(t),t.onNext(n),function(t){return{observer:t,dispose:function(){null===this.observer||o||(r.remove(this.observer),this.observer=null)}}}(t))},this.dispose=function(){o=!0,s=n=r=null}}return f(t,U),h(t,L),t.prototype.onCompleted=function(){this.onCompleted()},t.prototype.onError=function(t){this.onError(t)},t.prototype.onNext=function(t){this.onNext(t)},t.prototype._subscribe=function(t){return this._subscribe(t)},t.prototype.dispose=function(){this.dispose()},t}();Y.prototype.toNotifier=L.prototype.toNotifier,Y.prototype.asObserver=L.prototype.AsObserver;var Z=n.ReplaySubject=function(){function t(t,n,r){var o=t===e?Number.MAX_VALUE:t,i=n===e?Number.MAX_VALUE:n,s=r||N.currentThread,u=[],c=new b,f=!1,h=!1,a=function(t){var e=f?1:0,n=e+o;for(o>n&&(n=o);u.length>n;)u.shift();for(;u.length>e&&t-u[0].timestamp>i;)u.shift()},p=function(t){var e=s.now();u.push({value:t,timestamp:e}),a(e)},d=function(){if(h)throw Error(l)};this.onNext=function(t){var e,n,r=null;if(d(),!f)for(r=c.toArray(),p(R.createOnNext(t)),n=0;n<r.length;n++)e=r[n],e.onNext(t);if(null!==r)for(n=0;n<r.length;n++)e=r[n],e.ensureActive()},this.onError=function(t){var e,n=null;if(d(),!f){for(f=!0,p(R.createOnError(t)),n=c.toArray(),e=0;e<n.length;e++)n[e].onError(t);c=new b}if(null!==n)for(e=0;e<n.length;e++)n[e].ensureActive()},this.onCompleted=function(){var t,e=null;if(d(),!f){for(f=!0,p(R.createOnCompleted()),e=c.toArray(),t=0;t<e.length;t++)e[t].onCompleted();c=new b}if(null!==e)for(t=0;t<e.length;t++)e[t].ensureActive()},this._subscribe=function(t){var e,t=new M(s,t),n=function(t){return{observer:t,dispose:function(){this.observer.dispose(),null!==this.observer&&!h&&c.remove(this.observer)}}}(t);for(d(),a(s.now()),c.add(t),e=0;e<u.length;e++)u[e].value.accept(t);return t.ensureActive(),n},this.dispose=function(){h=!0,c=null}}return f(t,U),h(t,U),t.prototype.onNext=function(t){this.onNext(t)},t.prototype.onError=function(t){this.onError(t)},t.prototype.onCompleted=function(){this.onCompleted()},t.prototype._subscribe=function(t){return this._subscribe(t)},t.prototype.dispose=function(){this.dispose()},t}(),$=function(){function t(t,e){this.observer=t,this.observable=e}return f(t,U),h(t,L),t.prototype.onCompleted=function(){return this.observer.onCompleted()},t.prototype.onError=function(t){return this.observer.onError(t)},t.prototype.onNext=function(t){return this.observer.onNext(t)},t.prototype._Subscribe=function(t){return this.observable.Subscribe(t)},t}();U.start=function(t,e,n,r){return n||(n=[]),te(t,r).apply(e,n)};var te=U.toAsync=function(t,e){return e||(e=q),function(){var n=new K,r=function(){var e;try{e=t.apply(this,arguments)}catch(r){return void n.onError(r)}n.onNext(e),n.onCompleted()},o=a.call(arguments),i=this;return e.schedule(function(){r.apply(i,o)}),n}};_.multicast=function(t,e){var n=this;return"function"==typeof t?ce(function(r){var o=n.multicast(t());return new g(e(o).subscribe(r),o.connect())}):new J(n,t)},_.publish=function(t){return t?this.multicast(function(){return new X},t):this.multicast(new X)},_.publishLast=function(t){return t?this.multicast(function(){return new K},t):this.multicast(new K)},_.replay=function(t,e,n,r){return t&&null!==t?this.multicast(function(){return new Z(e,n,r)},t):this.multicast(new Z(e,n,r))},_.publishValue=function(t,e){return"function"==typeof t?this.multicast(function(){return new Y(e)},t):this.multicast(new Y(t))};var ee=U.never=function(){return ce(function(){return x})},ne=U.empty=function(t){return t||(t=O),ce(function(e){return t.schedule(function(){return e.onCompleted()})})},re=U.returnValue=function(t,e){return e||(e=O),ce(function(n){return e.schedule(function(){return n.onNext(t),n.onCompleted()})})},oe=U.throwException=function(t,e){return e||(e=O),ce(function(n){return e.schedule(function(){return n.onError(t)})})},ie=U.generate=function(t,e,n,r,o){return o||(o=D),ce(function(i){var s=!0,u=t;return o.scheduleRecursive(function(t){var o,c;try{s?s=!1:u=n(u),(o=e(u))&&(c=r(u))}catch(f){return void i.onError(f)}o?(i.onNext(c),t()):i.onCompleted()})})},se=U.defer=function(t){return ce(function(e){var n;try{n=t()}catch(r){return oe(r).subscribe(e)}return n.subscribe(e)})};U.using=function(t,e){return ce(function(n){var r,o,i=x;try{r=t(),null!==r&&(i=r),o=e(r)}catch(s){return new g(oe(s).subscribe(n),i)}return new g(o.subscribe(n),i)})};var ue=U.fromArray=function(t,e){return e||(e=D),ce(function(n){var r=0;return e.scheduleRecursive(function(e){r<t.length?(n.onNext(t[r++]),e()):n.onCompleted()})})},ce=U.createWithDisposable=function(t){return new B(t)};U.create=function(t){return ce(function(e){return w(t(e))})},U.range=function(t,e,n){n||(n=D);var r=t+e-1;return ie(t,function(t){return r>=t},function(t){return t+1},function(t){return t},n)},_.repeat=function(t){return W(this,t).concat()},_.retry=function(t){return W(this,t).catchException()},U.repeat=function(t,n,r){return r||(r=D),n===e&&(n=-1),re(t,r).repeat(n)},_.select=function(t){var e=this;return ce(function(n){var r=0;return e.subscribe(function(e){var o;try{o=t(e,r++)}catch(i){return void n.onError(i)}n.onNext(o)},function(t){n.onError(t)},function(){n.onCompleted()})})},_.where=function(t){var e=this;return ce(function(n){var r=0;return e.subscribe(function(e){var o;try{o=t(e,r++)}catch(i){return void n.onError(i)}o&&n.onNext(e)},function(t){n.onError(t)},function(){n.onCompleted()})})},_.groupByUntil=function(t,n,r,o){var i=this;return n||(n=s),o||(o=u),ce(function(s){var u={},c=new g,f=new k(c);return c.add(i.subscribe(function(i){var h,a,l,p,d,v,b,y,m;try{a=t(i),v=o(a)}catch(g){for(m in u)u[m].onError(g);return void s.onError(g)}d=!1;try{y=u[v],y||(y=new X,u[v]=y,d=!0)}catch(E){for(m in u)u[m].onError(E);return void s.onError(E)}if(d){d=new F(a,y,f),a=new F(a,y);try{h=r(a)}catch(w){for(m in u)u[m].onError(w);return void s.onError(w)}s.onNext(d),b=new C,c.add(b),p=function(){u[v]!==e&&(delete u[v],y.onCompleted()),c.remove(b)},b.disposable(h.take(1).subscribe(function(){},function(t){for(m in u)u[m].onError(t);s.onError(t)},function(){p()}))}try{l=n(i)}catch(x){for(m in u)u[m].onError(x);return void s.onError(x)}y.onNext(l)},function(t){for(var e in u)u[e].onError(t);s.onError(t)},function(){for(var t in u)u[t].onCompleted();s.onCompleted()})),f})},_.groupBy=function(t,e,n){return this.groupByUntil(t,e,function(){return ee()},n)},_.take=function(t,e){if(0>t)throw Error("Argument out of range");if(0==t)return ne(e);var n=this;return ce(function(e){var r=t;return n.subscribe(function(t){r>0&&(r--,e.onNext(t),0===r)&&e.onCompleted()},function(t){return e.onError(t)},function(){return e.onCompleted()})})},_.skip=function(t){if(0>t)throw Error("Argument out of range");var e=this;return ce(function(n){var r=t;return e.subscribe(function(t){0>=r?n.onNext(t):r--},function(t){return n.onError(t)},function(){return n.onCompleted()})})},_.takeWhile=function(t){var e=this;return ce(function(n){var r=0,o=!0;return e.subscribe(function(e){if(o){try{o=t(e,r++)}catch(i){return void n.onError(i)}o?n.onNext(e):n.onCompleted()}},function(t){return n.onError(t)},function(){return n.onCompleted()})})},_.skipWhile=function(t){var e=this;return ce(function(n){var r=0,o=!1;return e.subscribe(function(e){if(!o)try{o=!t(e,r++)}catch(i){return void n.onError(i)}o&&n.onNext(e)},function(t){n.onError(t)},function(){n.onCompleted()})})},_.selectMany=function(t,n){return n!==e?this.selectMany(function(e){return t(e).select(function(t){return n(e,t)})}):"function"==typeof t?this.select(t).mergeObservable():this.select(function(){return t}).mergeObservable()},_.finalValue=function(){var t=this;return ce(function(e){var n,r=!1;return t.subscribe(function(t){r=!0,n=t},function(t){e.onError(t)},function(){r?(e.onNext(n),e.onCompleted()):e.onError(Error("Sequence contains no elements."))})})},_.toArray=function(){return this.scan([],function(t,e){return t.push(e),t}).startWith([]).finalValue()},_.materialize=function(){var t=this;return ce(function(e){return t.subscribe(function(t){e.onNext(R.createOnNext(t))},function(t){e.onNext(R.createOnError(t)),e.onCompleted()},function(){e.onNext(R.createOnCompleted()),e.onCompleted()})})},_.dematerialize=function(){var t=this;return ce(function(e){return t.subscribe(function(t){return t.accept(e)},function(t){e.onError(t)},function(){e.onCompleted()})})},_.asObservable=function(){var t=this;return ce(function(e){return t.subscribe(e)})},_.windowWithCount=function(t,n){var r=this;if(0>=t)throw Error("Argument out of range");if(n===e&&(n=t),0>=n)throw Error("Argument out of range");return ce(function(e){var o=new C,i=new k(o),s=0,u=[],c=function(){var t=new X;u.push(t),e.onNext(d(t,i))};return c(),o.disposable(r.subscribe(function(e){var r;for(r=0;r<u.length;r++)u[r].onNext(e);e=s-t+1,e>=0&&0===e%n&&(e=u.shift(),e.onCompleted()),s++,0===s%n&&c()},function(t){for(;0<u.length;)u.shift().onError(t);e.onError(t)},function(){for(;0<u.length;)u.shift().onCompleted();e.onCompleted()})),i})},_.bufferWithCount=function(t,n){return n===e&&(n=t),this.windowWithCount(t,n).selectMany(function(t){return t.toArray()}).where(function(t){return 0<t.length})},_.startWith=function(){var t,e;return t=0,0<arguments.length&&void 0!==arguments[0].now?(e=arguments[0],t=1):e=O,t=a.call(arguments,t),T([ue(t,e),this]).concat()},_.scan=function(t,e){var n=this;return se(function(){var r,o=!1;return n.select(function(n){return o?r=e(r,n):(r=e(t,n),o=!0),r})})},_.scan1=function(t){var e=this;return se(function(){var n,r=!1;return e.select(function(e){return r?n=t(n,e):(n=e,r=!0),n})})},_.distinctUntilChanged=function(t,e){var n=this;return t||(t=s),e||(e=i),ce(function(r){var o,i=!1;return n.subscribe(function(n){var s,u=!1;try{s=t(n)}catch(c){return void r.onError(c)}if(i)try{u=e(o,s)}catch(f){return void r.onError(f)}i&&u||(i=!0,o=s,r.onNext(n))},function(t){r.onError(t)},function(){r.onCompleted()})})},_.finallyAction=function(t){var e=this;return ce(function(n){var r=e.subscribe(n);
return w(function(){try{r.dispose()}finally{t()}})})},_.doAction=function(t,e,n){var r,o=this;return 0==arguments.length||1<arguments.length||"function"==typeof t?r=t:(r=function(e){t.onNext(e)},e=function(e){t.onError(e)},n=function(){t.onCompleted()}),ce(function(t){return o.subscribe(function(e){try{r(e)}catch(n){t.onError(n)}t.onNext(e)},function(n){if(e)try{e(n)}catch(r){t.onError(r)}t.onError(n)},function(){if(n)try{n()}catch(e){t.onError(e)}t.onCompleted()})})},_.skipLast=function(t){var e=this;return ce(function(n){var r=[];return e.subscribe(function(e){r.push(e),r.length>t&&n.onNext(r.shift())},function(t){n.onError(t)},function(){n.onCompleted()})})},_.takeLast=function(t){var e=this;return ce(function(n){var r=[];return e.subscribe(function(e){r.push(e),r.length>t&&r.shift()},function(t){n.onError(t)},function(){for(;0<r.length;)n.onNext(r.shift());n.onCompleted()})})},_.ignoreElements=function(){var t=this;return ce(function(e){return t.subscribe(r,function(t){e.onError(t)},function(){e.onCompleted()})})},_.elementAt=function(t){if(0>t)throw Error("Argument out of range");var e=this;return ce(function(n){var r=t;return e.subscribe(function(t){0===r&&(n.onNext(t),n.onCompleted()),r--},function(t){n.onError(t)},function(){n.onError(Error("Argument out of range"))})})},_.elementAtOrDefault=function(t,n){var r=this;if(0>t)throw Error("Argument out of range");return n===e&&(n=null),ce(function(e){var o=t;return r.subscribe(function(t){0===o&&(e.onNext(t),e.onCompleted()),o--},function(t){e.onError(t)},function(){e.onNext(n),e.onCompleted()})})},_.defaultIfEmpty=function(t){var n=this;return t===e&&(t=null),ce(function(e){var r=!1;return n.subscribe(function(t){r=!0,e.onNext(t)},function(t){e.onError(t)},function(){r||e.onNext(t),e.onCompleted()})})},_.distinct=function(t,e){var n=this;return t||(t=s),e||(e=u),ce(function(r){var o={};return n.subscribe(function(n){var i,s,u,c=!1;try{i=t(n),s=e(i)}catch(f){return void r.onError(f)}for(u in o)if(s===u){c=!0;break}c||(o[s]=null,r.onNext(n))},function(t){r.onError(t)},function(){r.onCompleted()})})},_.mergeObservable=function(){var t=this;return ce(function(e){var n=new g,r=!1,o=new C;return n.add(o),o.disposable(t.subscribe(function(t){var o=new C;n.add(o),o.disposable(t.subscribe(function(t){e.onNext(t)},function(t){e.onError(t)},function(){n.remove(o),r&&1===n.count()&&e.onCompleted()}))},function(t){e.onError(t)},function(){r=!0,1===n.count()&&e.onCompleted()})),n})},_.merge=function(t){var e=this;return ce(function(n){var r=0,o=new g,i=!1,s=[],u=function(t){var e=new C;o.add(e),e.disposable(t.subscribe(function(t){n.onNext(t)},function(t){n.onError(t)},function(){var t;o.remove(e),0<s.length?(t=s.shift(),u(t)):(r--,i&&0===r&&n.onCompleted())}))};return o.add(e.subscribe(function(e){t>r?(r++,u(e)):s.push(e)},function(t){n.onError(t)},function(){i=!0,0===r&&n.onCompleted()})),o})},_.switchLatest=function(){var t=this;return ce(function(e){var n=!1,r=new A,o=!1,i=0,s=t.subscribe(function(t){var s=new C,u=++i;return n=!0,r.disposable(s),s.disposable(t.subscribe(function(t){i===u&&e.onNext(t)},function(t){i===u&&e.onError(t)},function(){i===u&&(n=!1,o)&&e.onCompleted()}))},function(t){e.onError(t)},function(){o=!0,n||e.onCompleted()});return new g(s,r)})},U.merge=function(t){t||(t=O);var e=1<arguments.length&&arguments[1]instanceof Array?arguments[1]:a.call(arguments,1);return ue(e,t).mergeObservable()},_.concat=function(){var t,e=fe;t=arguments;var n,r;for(n=[],r=0;r<t.length;r++)n.push(t[r]);return t=n,t.unshift(this),e.apply(this,t)},_.concatObservable=function(){return this.merge(1)};var fe=U.concat=function(){var t=1===arguments.length&&arguments[0]instanceof Array?arguments[0]:a.call(arguments);return T(t).concat()};_.catchException=function(t){return"function"==typeof t?he(this,t):ae([this,t])};var he=function(t,e){return ce(function(n){var r=new C,o=new A;return r.disposable(t.subscribe(function(t){n.onNext(t)},function(t){var r;try{r=e(t)}catch(i){return void n.onError(i)}t=new C,o.disposable(t),t.disposable(r.subscribe(n))},function(){n.onCompleted()})),o})},ae=U.catchException=function(){var t=1===arguments.length&&arguments[0]instanceof Array?arguments[0]:a.call(arguments);return T(t).catchException()};_.onErrorResumeNext=function(t){return le([this,t])};var le=U.onErrorResumeNext=function(){var t=1===arguments.length&&arguments[0]instanceof Array?arguments[0]:a.call(arguments);return ce(function(e){var n=0,r=new A,o=O.scheduleRecursive(function(o){var i,s;n<t.length?(i=t[n++],s=new C,r.disposable(s),s.disposable(i.subscribe(function(t){e.onNext(t)},function(){o()},function(){o()}))):e.onCompleted()});return new g(r,o)})},pe=function(){function t(t,e){var n=this;this.selector=t,this.observer=e,this.leftQ=[],this.rightQ=[],this.left=I(function(t){"E"===t.kind?n.observer.onError(t.exception):0===n.rightQ.length?n.leftQ.push(t):n.onNext(t,n.rightQ.shift())}),this.right=I(function(t){"E"===t.kind?n.observer.onError(t.exception):0===n.leftQ.length?n.rightQ.push(t):n.onNext(n.leftQ.shift(),t)})}return t.prototype.onNext=function(t,e){var n;if("C"===t.kind||"C"===e.kind)this.observer.onCompleted();else{try{n=this.selector(t.value,e.value)}catch(r){return void this.observer.onError(r)}this.observer.onNext(n)}},t}();_.zip=function(t,e){return v(this,t,function(t){var n=new pe(e,t);return new H(function(t){return n.left.onNext(t)},function(t){return n.right.onNext(t)})})};var de;de=function(){function t(t,n){var r=this;this.selector=t,this.observer=n,this.rightStopped=this.leftStopped=!1,this.left=I(function(t){"N"===t.kind?(r.leftValue=t,r.rightValue!==e?r.onNext():r.rightStopped&&r.observer.onCompleted()):"E"===t.kind?r.observer.onError(t.exception):(r.leftStopped=!0,r.rightStopped&&r.observer.onCompleted())}),this.right=I(function(t){"N"===t.kind?(r.rightValue=t,r.leftValue!==e?r.onNext():r.leftStopped&&r.observer.onCompleted()):"E"===t.kind?r.observer.onError(t.exception):(r.rightStopped=!0,r.leftStopped&&r.observer.onCompleted())})}return t.prototype.onNext=function(){var t;try{t=this.selector(this.leftValue.value,this.rightValue.value)}catch(e){return void this.observer.onError(e)}this.observer.onNext(t)},t}(),_.combineLatest=function(t,e){return v(this,t,function(t){var n=new de(e,t);return new H(function(t){return n.left.onNext(t)},function(t){return n.right.onNext(t)})})},_.takeUntil=function(t){return v(t,this,function(t,e){var n=!1,r=!1;return new H(function(e){!r&&!n&&("C"===e.kind?n=!0:"E"===e.kind?(r=n=!0,t.onError(e.exception)):(r=!0,t.onCompleted()))},function(n){r||(n.accept(t),(r="N"!==n.kind)&&e.dispose())})})},_.skipUntil=function(t){return v(this,t,function(t,e,n){var r=!1,o=!1;return new H(function(e){"E"==e.kind?t.onError(e.exception):r&&e.accept(t)},function(e){o||("N"===e.kind?r=!0:"E"===e.kind&&t.onError(e.exception),o=!0,n.dispose())})})},U.amb=function(){var t,e=ee(),n=1===arguments.length&&arguments[0]instanceof Array?arguments[0]:a.call(arguments);for(t=0;t<n.length;t++)e=e.amb(n[t]);return e},_.amb=function(t){return v(this,t,function(t,e,n){var r="N";return new H(function(e){"N"===r&&(r="L",n.dispose()),"L"===r&&e.accept(t)},function(n){"N"===r&&(r="R",e.dispose()),"R"===r&&n.accept(t)})})}};
//# sourceMappingURL=jspm_packages\npm\rxjs@1.0.10621/lib\rx.min.js.map